---
- name: install Canonical Livepatch with snap
  command: snap install canonical-livepatch
  become: yes
  register: livepatch
  failed_when: "livepatch.rc != 0 and 'already installed' not in livepatch.stderr"
  changed_when: "livepatch.rc == 0 and 'already installed' not in livepatch.stderr"

- name: install snaps
  command: snap install {{ item }}
  become: yes
  register: snaps
  failed_when: "snaps.rc != 0 and 'already installed' not in snaps.stderr"
  changed_when: "snaps.rc == 0 and 'already installed' not in snaps.stderr"
  with_items:
    - conjure-up    --classic --edge
    - charm         --classic

- name: add my-tools PPA
  apt_repository: repo='ppa:nobuto/my-tools' state=present update_cache=yes
  become: yes

- name: install indicator-presentation
  apt: name=indicator-presentation state=present
  become: yes

- name: install gnome-sound-recorder-all
  apt: name=gnome-sound-recorder-all state=present
  become: yes

- name: disable auto-update of Google Music uploader
  file: path=/etc/default/google-musicmanager state=touch
  become: yes
  changed_when: False
