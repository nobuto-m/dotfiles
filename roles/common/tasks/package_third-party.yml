---
- name: install snaps
  command: snap install {{ item }}
  become: yes
  register: snaps
  failed_when: "snaps.rc != 0 and 'already installed' not in snaps.stderr"
  changed_when: "snaps.rc == 0 and 'already installed' not in snaps.stderr"
  with_items:
    - juju              --classic --beta
    - lxd
    - conjure-up        --classic
    - multipass         --classic --beta
    - openstackclients  --classic --edge

- name: add user to lxd group
  user:
    name: "{{ ansible_user_id }}"
    groups: lxd
    append: yes

- name: add my-tools PPA
  apt_repository: repo='ppa:nobuto/my-tools' state=present update_cache=yes
  become: yes

- name: install indicator-presentation
  apt: name=indicator-presentation state=present
  become: yes

- name: install gnome-sound-recorder-all
  apt: name=gnome-sound-recorder-all state=present
  become: yes
